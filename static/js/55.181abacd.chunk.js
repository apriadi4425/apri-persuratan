(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[55],{867:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),r=t(616),o=l.a.memo((function(e){var a=e.label,t=e.name,n=e.placeholder,o=e.value,c=e.onChange,s=e.onKeyPress,i=e.valid;return l.a.createElement(r.wb,null,l.a.createElement(r.u,{md:12},l.a.createElement(r.K,{row:!0},l.a.createElement(r.u,{md:"2 mt-1"},l.a.createElement(r.cb,{htmlFor:"text-input"},a)),l.a.createElement(r.u,{xs:"12",md:"10"},l.a.createElement(r.S,{valid:i,value:o,onChange:c,id:t,name:t,placeholder:n,onKeyPress:s}),l.a.createElement(r.Sb,null,"Data Berhasil Diubah")))))})),c=t(19),s=t(622),i=t.n(s),u=t(623),m=t(157),p=t(105),d=t(618),b=t(620),h=t.n(b),g=function(){var e=Object(n.useState)({token:"",nama:"",alamat:"",kota:"",telpon:"",email:"",website:"",kode_pos:"",kode_surat:"",url_server:"",file:"",logo:""}),a=Object(d.a)(e,2),t=a[0],l=a[1],r=Object(n.useState)({token:null,nama:null,alamat:null,kota:null,telpon:null,email:null,website:null,kode_pos:null,kode_surat:null,url_server:null}),o=Object(d.a)(r,2),c=o[0],s=o[1],b=Object(n.useState)(!0),g=Object(d.a)(b,2),f=g[0],v=g[1],E=Object(n.useState)(!1),k=Object(d.a)(E,2),j=k[0],O=k[1],S=Object(n.useState)([]),w=Object(d.a)(S,2),I=w[0],K=w[1],y=Object(n.useState)(!1),C=Object(d.a)(y,2),_=C[0],P=C[1],x=Object(n.useCallback)(Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),e.next=3,h.a.get("".concat("https://api-surat.pta-banjarmasin.go.id/public","/api/instansi"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(a.token)}}).then((function(e){l(e.data)})).catch((function(e){console.log(e)}));case 3:v(!1);case 4:case"end":return e.stop()}}),e)}))),[]);Object(n.useEffect)((function(){x()}),[x]);return{Form:t,HandleForm:function(e){l(Object(p.a)(Object(p.a)({},t),{},Object(m.a)({},e.target.name,e.target.value))),s({nama:null,alamat:null,kota:null,telpon:null,email:null,website:null,kode_pos:null,kode_surat:null,url_server:null}),O(!0)},Loading:f,CobaSaveData:function(e){"Enter"===e.key&&function(e){var a=JSON.parse(localStorage.getItem("user")),t=e.target.name,n=Object(m.a)({},t,e.target.value);h()({method:"put",url:"".concat("https://api-surat.pta-banjarmasin.go.id/public","/api/instansi/").concat(a.instansi_id),data:n,headers:{Accept:"application/json",Authorization:"Bearer ".concat(a.token)}}).then((function(e){s(Object(p.a)(Object(p.a)({},c),{},Object(m.a)({},t,!0))),O(!1)})).catch((function(e){console.log(e)}))}(e)},Valid:c,NotifEnter:j,SaveFile:function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),n=JSON.parse(localStorage.getItem("user")),(r=new FormData).set("file",a),e.next=6,h()({method:"post",url:"".concat("https://api-surat.pta-banjarmasin.go.id/public","/api/ubah-logo"),data:r,headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n.token)}}).then((function(e){l(Object(p.a)(Object(p.a)({},t),{},{logo:e.data.nama})),P(!0),K([])})).catch((function(e){K(e.response.data.error)}));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Suk:_,Error:I,GetToken:function(){var e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),e.next=3,h.a.get("".concat("https://api-surat.pta-banjarmasin.go.id/public","/api/get-token"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(a.token)}}).then((function(e){l(Object(p.a)(Object(p.a)({},t),{},{token:e.data}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}};a.default=function(){var e=JSON.parse(localStorage.getItem("user")),a=g(),t=a.Form,s=a.HandleForm,i=a.Loading,u=a.CobaSaveData,m=a.Valid,p=a.NotifEnter,d=a.SaveFile,b=a.Error,h=a.Suk,f=a.GetToken;return l.a.createElement(r.j,null,2===e.level?l.a.createElement(c.a,{to:"/"}):null,l.a.createElement(r.n,null,"Konfigurasi Aplikasi"," ",l.a.createElement("div",{className:"card-header-actions text-danger font-weight-bold"},p?"Tekan Enter Untuk Menyimpan":null,l.a.createElement(r.f,{onClick:f,color:"primary",variant:"outline",size:"sm"},"Dapatkan Token"),l.a.createElement("a",{href:"https://drive.google.com/file/d/1REZKLRj6u91nLbBjeOCsZPP5CoHi3l6V/view?usp=sharing",className:"ml-2 btn btn-success btn-sm",style:{color:"white"}},"Folder Upload"))),l.a.createElement(r.k,null,i?l.a.createElement("p",{className:"text-center"},"....Loading Data"):l.a.createElement(n.Fragment,null,l.a.createElement(o,{valid:m.nama,label:"Nama Instansi",name:"nama",value:t.nama,onKeyPress:u,onChange:s,placeholder:"Nama Instansi"}),l.a.createElement(o,{valid:m.alamat,label:"Alamat Instansi",name:"alamat",value:t.alamat,onKeyPress:u,onChange:s,placeholder:"Alamat Instansi"}),l.a.createElement(o,{valid:m.kota,label:"Kota Instansi",name:"kota",value:t.kota,onKeyPress:u,onChange:s,placeholder:"Kota Instansi"}),l.a.createElement(o,{valid:m.telpon,label:"Telpon Instansi",name:"telpon",value:t.telpon,onKeyPress:u,onChange:s,placeholder:"Telpon Instansi"}),l.a.createElement(o,{valid:m.email,label:"Email Instansi",name:"email",value:t.email,onKeyPress:u,onChange:s,placeholder:"Email Instansi"}),l.a.createElement(o,{valid:m.website,label:"Website Instansi",name:"website",value:t.website,onKeyPress:u,onChange:s,placeholder:"Website Instansi"}),l.a.createElement(o,{valid:m.kode_pos,label:"Kode Pos Instansi",name:"kode_pos",value:t.kode_pos,onKeyPress:u,onChange:s,placeholder:"Kode Pos Instansi"}),l.a.createElement(o,{valid:m.kode_surat,label:"Kode Surat Instansi",name:"kode_surat",value:t.kode_surat,onKeyPress:u,onChange:s,placeholder:"Kode Surat Instansi"}),l.a.createElement(o,{valid:m.url_server,label:"Link Upload Surat",name:"url_server",value:t.url_server,onKeyPress:u,onChange:s,placeholder:"Link Upload Surat"}),l.a.createElement(r.wb,null,l.a.createElement(r.u,{md:12},l.a.createElement(r.K,{row:!0},l.a.createElement(r.u,{md:"2 mt-1"},l.a.createElement(r.cb,{htmlFor:"text-input"},"Token Upload Surat")),l.a.createElement(r.u,{xs:"12",md:"10"},l.a.createElement(r.S,{readOnly:!0,value:t.token}),l.a.createElement(r.Sb,null,"Data Berhasil Diubah"))))),l.a.createElement(r.wb,null,l.a.createElement(r.u,{md:12},l.a.createElement(r.K,{row:!0},l.a.createElement(r.u,{md:"2 mt-1"},l.a.createElement(r.cb,{htmlFor:"text-input"},"Logo Instansi")),l.a.createElement(r.u,{xs:"12",md:"10"},l.a.createElement(r.U,{invalid:b.file,custom:!0,id:"custom-file-input",onChange:function(e){return d(e.target.files[0])},valid:h,onClick:function(e){e.target.value=null}}),l.a.createElement(r.cb,{htmlFor:"custom-file-input",variant:"custom-file"},t.file?t.file.name:""!==t.logo?t.logo:"Upload Logo"),b.file?b.file.map((function(e,a){return l.a.createElement(r.ab,{key:a},e)})):l.a.createElement(r.Sb,null,"Sukses (Logout dan Login untuk mengganti logo profile)"))))))))}}}]);
//# sourceMappingURL=55.181abacd.chunk.js.map