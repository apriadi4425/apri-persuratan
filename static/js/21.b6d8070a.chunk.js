(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[21],{687:function(e,a,t){"use strict";var n=t(617),i=t(629),s=t(12),r=t(1),c=(t(57),t(619)),o=t(621),l=t(922),d=t(644),u=t(626),m=t(656),p=t(80),b="undefined"===typeof window?r.useEffect:r.useLayoutEffect,f=r.forwardRef((function(e,a){var t=e.alignItems,i=void 0===t?"center":t,o=e.autoFocus,f=void 0!==o&&o,v=e.button,h=void 0!==v&&v,g=e.children,k=e.classes,j=e.className,E=e.component,O=e.ContainerComponent,x=void 0===O?"li":O,y=e.ContainerProps,C=(y=void 0===y?{}:y).className,_=Object(n.a)(y,["className"]),N=e.dense,S=void 0!==N&&N,w=e.disabled,I=void 0!==w&&w,D=e.disableGutters,A=void 0!==D&&D,M=e.divider,P=void 0!==M&&M,B=e.focusVisibleClassName,T=e.selected,F=void 0!==T&&T,L=Object(n.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),z=r.useContext(m.a),Y={dense:S||z.dense||!1,alignItems:i},G=r.useRef(null);b((function(){f&&G.current&&G.current.focus()}),[f]);var J=r.Children.toArray(g),R=J.length&&Object(d.a)(J[J.length-1],["ListItemSecondaryAction"]),V=r.useCallback((function(e){G.current=p.findDOMNode(e)}),[]),H=Object(u.a)(V,a),W=Object(s.a)({className:Object(c.default)(k.root,j,Y.dense&&k.dense,!A&&k.gutters,P&&k.divider,I&&k.disabled,h&&k.button,"center"!==i&&k.alignItemsFlexStart,R&&k.secondaryAction,F&&k.selected),disabled:I},L),$=E||"li";return h&&(W.component=E||"div",W.focusVisibleClassName=Object(c.default)(k.focusVisible,B),$=l.a),R?($=W.component||E?$:"div","li"===x&&("li"===$?$="div":"li"===W.component&&(W.component="div")),r.createElement(m.a.Provider,{value:Y},r.createElement(x,Object(s.a)({className:Object(c.default)(k.container,C),ref:H},_),r.createElement($,W,J),J.pop()))):r.createElement(m.a.Provider,{value:Y},r.createElement($,Object(s.a)({ref:H},W),J))})),v=Object(o.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(f),h=r.forwardRef((function(e,a){var t,i=e.classes,o=e.className,l=e.component,d=void 0===l?"li":l,u=e.disableGutters,m=void 0!==u&&u,p=e.ListItemClasses,b=e.role,f=void 0===b?"menuitem":b,h=e.selected,g=e.tabIndex,k=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(t=void 0!==g?g:-1),r.createElement(v,Object(s.a)({button:!0,role:f,tabIndex:t,component:d,selected:h,disableGutters:m,classes:Object(s.a)({dense:i.dense},p),className:Object(c.default)(i.root,o,h&&i.selected,!m&&i.gutters),ref:a},k))}));a.a=Object(o.a)((function(e){return{root:Object(s.a)({},e.typography.body1,Object(i.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(s.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(h)},715:function(e,a,t){},872:function(e,a,t){"use strict";t.r(a);var n=t(622),i=t.n(n),s=t(623),r=t(157),c=t(105),o=t(618),l=t(1),d=t.n(l),u=t(616),m=(t(715),t(620)),p=t.n(m),b=t(378),f=t(906),v=t(909),h=t(927),g=t(917),k=t(687),j=t(910),E=t(652),O=t(647),x=d.a.memo((function(e){var a=e.Modal,t=e.ToggleModal,n=e.Form,r=e.HandleForm,m=e.setForm,b=e.GetData,x=JSON.parse(localStorage.getItem("user")),y=Object(l.useState)([]),C=Object(o.a)(y,2),_=C[0],N=C[1],S=Object(l.useState)(!1),w=Object(o.a)(S,2),I=w[0],D=w[1],A=Object(l.useState)(!1),M=Object(o.a)(A,2),P=M[0],B=M[1],T=Object(l.useState)(""),F=Object(o.a)(T,2),L=F[0],z=F[1],Y=Object(l.useContext)(O.a).KirimNotif,G=function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==a.target.value){e.next=8;break}return e.next=3,J();case 3:return e.next=5,m(Object(c.a)(Object(c.a)({},n),{},{teruskan:1}));case 5:D(!0),e.next=10;break;case 8:D(!1),m(Object(c.a)(Object(c.a)({},n),{},{teruskan:a.target.value}));case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("https://surat3.pa-kotabaru.go.id/public","/api/user-2"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(x.token)}}).then((function(e){N(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={disposisi_id:n.disposisi_id,pesan:n.pesan,id_penerima:n.id_penerima,teruskan:n.teruskan,jabatan_penerima:L},e.next=3,B(!0);case 3:return e.next=5,p()({method:"post",url:"".concat("https://surat3.pa-kotabaru.go.id/public","/api/disposisi-selanjutnya"),data:a,headers:{Accept:"application/json",Authorization:"Bearer ".concat(x.token)}}).then((function(e){Y(e.data.token,n),E.a.database().ref("/notifikasi/".concat(x.instansi_id,"/").concat(x.id)).once("value").then((function(e){var a={disposisi:(e.val()&&e.val().disposisi||0)-1},t={};return t["/notifikasi/".concat(x.instansi_id,"/").concat(x.id)]=a,E.a.database().ref().update(t)})),1===n.teruskan?(E.a.database().ref("/notifikasi/".concat(x.instansi_id,"/").concat(n.id_penerima)).once("value").then((function(e){var a={disposisi:(e.val()&&e.val().disposisi||0)+1},t={};return t["/notifikasi/".concat(x.instansi_id,"/").concat(n.id_penerima)]=a,E.a.database().ref().update(t)})),E.a.database().ref("/notifikasi/".concat(x.instansi_id,"/").concat(e.data.id_admin)).once("value").then((function(a){var t=a.val()&&a.val().disposisi||0,n=a.val()&&a.val().notif||0;if(0===n){var i={disposisi:t,notif:n+1},s={};return s["/notifikasi/".concat(x.instansi_id,"/").concat(e.data.id_admin)]=i,E.a.database().ref().update(s)}var r={disposisi:t,notif:n-1},c={};return c["/notifikasi/".concat(x.instansi_id,"/").concat(e.data.id_admin)]=r,E.a.database().ref().update(c)}))):E.a.database().ref("/notifikasi/".concat(x.instansi_id,"/").concat(e.data)).once("value").then((function(a){var t=a.val()&&a.val().disposisi||0,n=a.val()&&a.val().notif||0;if(0===n){var i={disposisi:t-1,notif:n+1},s={};return s["/notifikasi/".concat(x.instansi_id,"/").concat(e.data)]=i,E.a.database().ref().update(s)}var r={disposisi:t-1,notif:n-1},c={};return c["/notifikasi/".concat(x.instansi_id,"/").concat(e.data)]=r,E.a.database().ref().update(c)}))})).catch((function(e){console.log(e)}));case 5:return e.next=7,B(!1);case 7:return e.next=9,b();case 9:t();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(u.gb,{size:"lg",show:a,onClose:t,closeOnBackdrop:!1,color:"primary"},d.a.createElement(u.jb,{closeButton:!0},d.a.createElement(u.kb,null,"Catatan Disposisi")),d.a.createElement(u.hb,null,d.a.createElement(f.a,{label:"Catatan Disposisi",placeholder:"Tuliskan Catatan disposisi disini",name:"pesan",margin:"normal",fullWidth:!0,InputLabelProps:{shrink:!0},value:n.pesan,onChange:r}),d.a.createElement(v.a,{fullWidth:!0,margin:"normal"},d.a.createElement(h.a,{shrink:!0,id:"demo-simple-select-placeholder-label-label"},"Tindakan Selanjutnya"),d.a.createElement(g.a,{labelId:"demo-simple-select-placeholder-label-label",id:"demo-simple-select-placeholder-label",value:n.teruskan,name:"teruskan",placeholder:"Tuliskan Catatan disposisi disini",displayEmpty:!0,onChange:G},d.a.createElement(k.a,{value:""},d.a.createElement("em",null,"Pilih Tindakan Selanjutnya")),d.a.createElement(k.a,{value:1},"Teruskan Disposisi Surat"),d.a.createElement(k.a,{value:2},"Akhiri Disposisi (Disposisi Selesai)"))),I?d.a.createElement(d.a.Fragment,null,d.a.createElement(v.a,{fullWidth:!0,margin:"normal"},d.a.createElement(h.a,{shrink:!0,id:"demo-simple-select-placeholder-label-label"},"Pilih Penerima"),d.a.createElement(g.a,{labelId:"demo-simple-select-placeholder-label-label",id:"demo-simple-select-placeholder-label",value:n.id_penerima,name:"id_penerima",placeholder:"Tuliskan Catatan disposisi disini",displayEmpty:!0,onChange:function(e){var a;m(Object(c.a)(Object(c.a)({},n),{},{id_penerima:e.target.value})),a=e.target.value,p.a.get("".concat("https://surat3.pa-kotabaru.go.id/public","/api/user-jabatan/").concat(a),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(x.token)}}).then((function(e){z(e.data)})).catch((function(e){console.log(e)}))}},d.a.createElement(k.a,{value:""},d.a.createElement("em",null,"Pilih Tindakan Selanjutnya")),_.map((function(e,a){return e.id!==x.id?d.a.createElement(k.a,{key:a,value:e.id},e.name," -- ",e.jabatan):null}))),d.a.createElement(j.a,null,"Penerima akan mendapatkan notifikasi melalui android jika telah mengisntall APK Apri")),d.a.createElement(v.a,{fullWidth:!0},d.a.createElement(f.a,{label:"Jabatan Penerima",value:L,onChange:function(e){return z(e.target.value)},placeholder:"Jabatan Penerima",margin:"normal",fullWidth:!0,InputLabelProps:{shrink:!0}}))):null),d.a.createElement(u.ib,null,d.a.createElement(u.f,{color:"primary",type:"submit",disabled:""===n.pesan||""===n.teruskan||P,onClick:R},P?"...Loading":"Kirimkan")," ",d.a.createElement(u.f,{color:"secondary",onClick:t},"Cancel")))})),y=d.a.memo((function(e){var a=JSON.parse(localStorage.getItem("user")),t=Object(l.useState)([]),n=Object(o.a)(t,2),m=n[0],f=n[1],v=Object(l.useState)({disposisi_id:"",pesan:"",id_penerima:"",teruskan:""}),h=Object(o.a)(v,2),g=h[0],k=h[1],j=Object(l.useCallback)((function(e){k(Object(c.a)(Object(c.a)({},g),{},Object(r.a)({},e.target.name,e.target.value)))}),[g]),E=Object(l.useState)(!1),O=Object(o.a)(E,2),y=O[0],C=O[1],_=Object(l.useState)(!1),N=Object(o.a)(_,2),S=N[0],w=N[1],I=Object(l.useCallback)((function(){w(!S)}),[S]),D=function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(Object(c.a)(Object(c.a)({},g),{},{disposisi_id:a}));case 2:I();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),A=Object(l.useCallback)(Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,p.a.get("".concat("https://surat3.pa-kotabaru.go.id/public","/api/disposisi-saya"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(a.token)}}).then((function(e){f(e.data)})).catch((function(e){console.log(e)}));case 3:C(!1);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(l.useEffect)((function(){A()}),[A]),d.a.createElement(u.j,null,d.a.createElement(x,{Modal:S,Form:g,ToggleModal:I,HandleForm:j,setForm:k,GetData:A}),d.a.createElement(u.k,null,d.a.createElement("div",{className:"container mt-5 mb-5"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("h4",null,2===a.level?"List Disposisi Saya":"List Disposisi yang Belum Selesai"),y?d.a.createElement("p",{className:"text-center text-muted",style:{fontSize:20}},"...Loading Data"):d.a.createElement("ul",{className:"timelineses"},m.map((function(e,t){return d.a.createElement("li",{key:t},2===a.level?d.a.createElement("p",{onClick:function(){return D(e.id)},className:"text_title_disposisi"},e.surat.nomor_surat,d.a.createElement("strong",{className:"Biasa"===e.urgensi?"text-success":"text-danger",style:{fontSize:12}},"(",e.urgensi,"!)")):d.a.createElement("p",{className:"text_title_disposisi"},e.surat.nomor_surat,d.a.createElement("strong",{className:"Biasa"===e.urgensi?"text-success":"text-danger",style:{fontSize:12}},"(",e.urgensi,"!)")),d.a.createElement("a",{href:"#"},e.surat.asal_surat),d.a.createElement("a",{href:"#",className:"float-right"},b(e.created_at).locale("id").format("dddd, DD MMMM YYYY")),d.a.createElement("br",null),e.surat.files.map((function(e,a){return d.a.createElement("p",{style:{marginTop:0,marginBottom:0},key:a},"File Surat ",a+1,": ",d.a.createElement("a",{href:"".concat(e.url,"/").concat(e.slug,".").concat(e.extensi)},e.nama_file))})),d.a.createElement("p",{className:"mt-2"},"Perihal Surat : ",e.surat.perihal),d.a.createElement("section",{className:"experience pt-100 pb-100",id:"experience"},d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-xl-8 mx-auto text-center"},d.a.createElement("div",{className:"section-title"},d.a.createElement("h4",null,"Riwayat Catatan Disposisi")))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-xl-12"},d.a.createElement("ul",{className:"timeline-list"},e.penerima.map((function(e,a){return d.a.createElement("li",{key:a},d.a.createElement("div",{className:"timeline_content"},d.a.createElement("span",null,b(e.updated_at).locale("id").format("dddd, DD MMMM YYYY")),d.a.createElement("h4",null,e.id_penerima.name),d.a.createElement("p",null,e.pesan)))}))))))))}))))))))}));a.default=y}}]);
//# sourceMappingURL=21.b6d8070a.chunk.js.map