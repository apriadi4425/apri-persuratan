(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[24],{658:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(671);var r=a(670);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},863:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(616),l=a(156),i=a(19),o=a(378),s=a(658),u=a(622),m=a.n(u),d=a(623),f=a(618),b=a(620),p=a.n(b),h=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(f.a)(c,2),i=l[0],o=l[1],u=Object(n.useState)([]),b=Object(f.a)(u,2),h=b[0],k=b[1],E=JSON.parse(localStorage.getItem("user"));return{Data:a,fields:[{key:"nama_sk",label:"Nama SK",_style:{width:"50%"}},{key:"created_at",label:"Tgl. Dibuat",filter:!1,sorter:!1,_style:{width:"20%"}},{key:"milik",label:"Pembuat SK",filter:!1,sorter:!1,_style:{width:"20%"}},{key:"show_details",label:"",_style:{width:"10%"},sorter:!1,filter:!1}],Loading:i,GetData:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,p.a.get("".concat("http://api-surat.pta-banjarmasin.go.id/public","/api/sk-list"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(E.token)}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)}));case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),User:E,details:h,toggleDetails:function(e){var t=h.indexOf(e),a=h.slice();-1!==t?a.splice(t,1):a=[].concat(Object(s.a)(h),[e]),k(a)}}},k=a(105),E=a(648),j=a(649),g=function(e,t){var a=JSON.parse(localStorage.getItem("user")),r=Object(n.useState)({nama_sk:"",file:""}),c=Object(f.a)(r,2),l=c[0],i=c[1],o=Object(n.useState)(!1),s=Object(f.a)(o,2),u=s[0],b=s[1],h=Object(n.useState)([]),k=Object(f.a)(h,2),E=k[0],j=k[1];return{Form:l,SetForm:i,Loading:u,SaveData:function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),(n=new FormData).set("nama_sk",l.nama_sk),n.set("file",l.file),e.next=6,p()({method:"post",url:"".concat("http://api-surat.pta-banjarmasin.go.id/public","/api/add-sk-list"),data:n,headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a.token)}}).then((function(e){t.push("/buat-dokument/sk/".concat(e.data.slug,"/").concat(e.data.id,"/").concat(e.data.instansi_id))})).catch((function(e){j(e.response.data.error)}));case 6:b(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Error:E}},O=a(906),y=r.a.memo((function(e){var t=e.history,a=Object(n.useState)(!1),l=Object(f.a)(a,2),i=l[0],o=l[1],s=function(){o(!i)},u=g(o,t),m=u.Form,d=u.SetForm,b=u.Loading,p=u.SaveData,h=u.Error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,{onClick:s,size:"sm",className:"btn-brand mr-2 mb-1"}," ",r.a.createElement(E.a,{icon:j.d,size:"lg"})),r.a.createElement(c.gb,{size:"lg",show:i,onClose:s,closeOnBackdrop:!1,color:"primary"},r.a.createElement(c.jb,{closeButton:!0},r.a.createElement(c.kb,null,"Tambah List SK Baru")),r.a.createElement(c.hb,null,r.a.createElement(O.a,{label:"Nama SK Baru",placeholder:"Nama Sk Baru",error:h.nama_sk,fullWidth:!0,value:m.nama_sk,helperText:h.nama_sk?h.nama_sk.map((function(e,t){return e})):null,onChange:function(e){return d(Object(k.a)(Object(k.a)({},m),{},{nama_sk:e.target.value}))}}),r.a.createElement(c.u,{className:"mt-3",xs:"12",md:"12"},r.a.createElement(c.K,{row:!0},r.a.createElement(c.U,{invalid:h.file,custom:!0,id:"custom-file-input",onChange:function(e){return d(Object(k.a)(Object(k.a)({},m),{},{file:e.target.files[0]}))}}),r.a.createElement(c.cb,{htmlFor:"custom-file-input",variant:"custom-file"},m.file?m.file.name:"Upload Template"),h.file?h.file.map((function(e,t){return r.a.createElement(c.ab,{key:t},e)})):null))),r.a.createElement(c.ib,null,r.a.createElement(c.f,{color:"primary",disabled:b,type:"submit",onClick:p},b?"...Loading":"Daftarkan")," ",r.a.createElement(c.f,{color:"secondary",onClick:s},"Cancel"))))})),S=r.a.memo((function(e){var t=e.item,a=e.GetDataUser,l=JSON.parse(localStorage.getItem("user")),i=Object(n.useState)({nama_sk:t.nama_sk,id:t.id}),o=Object(f.a)(i,2),s=o[0],u=o[1],b=Object(n.useState)(!1),h=Object(f.a)(b,2),E=h[0],j=h[1],g=Object(n.useState)([]),y=Object(f.a)(g,2),S=y[0],v=y[1],_=Object(n.useState)(!1),w=Object(f.a)(_,2),C=w[0],D=w[1],N=function(){D(!C)},U=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,p()({method:"put",url:"".concat("http://api-surat.pta-banjarmasin.go.id/public","/api/edit-sk-list"),data:s,headers:{Accept:"application/json",Authorization:"Bearer ".concat(l.token)}}).then((function(e){a(),N()})).catch((function(e){v(e.response.data.error)}));case 3:j(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,{color:"success",variant:"outline",shape:"square",size:"sm",className:"mb-2",onClick:N},"Ubah Nama SK"),r.a.createElement(c.gb,{size:"lg",show:C,onClose:N,closeOnBackdrop:!1,color:"success"},r.a.createElement(c.jb,{closeButton:!0},r.a.createElement(c.kb,null,"Ubah Nama Sk")),r.a.createElement(c.hb,null,r.a.createElement(O.a,{label:"Nama SK",placeholder:"Nama Sk",error:S.nama_sk,fullWidth:!0,value:s.nama_sk,helperText:S.nama_sk?"Terjadi Kesalahan":null,onChange:function(e){return u(Object(k.a)(Object(k.a)({},s),{},{nama_sk:e.target.value}))}})),r.a.createElement(c.ib,null,r.a.createElement(c.f,{color:"success",disabled:E,type:"submit",onClick:U},E?"...Loading":"Ubah")," ",r.a.createElement(c.f,{color:"secondary",onClick:N},"Cancel"))))})),v=r.a.memo((function(e){var t=e.item,a=e.GetDataUser,l=JSON.parse(localStorage.getItem("user")),i=Object(n.useState)({file:"",id:t.id}),o=Object(f.a)(i,2),s=o[0],u=o[1],b=Object(n.useState)(!1),h=Object(f.a)(b,2),E=h[0],j=h[1],g=Object(n.useState)([]),O=Object(f.a)(g,2),y=O[0],S=O[1],v=Object(n.useState)(!1),_=Object(f.a)(v,2),w=_[0],C=_[1],D=function(){C(!w)};console.log(s);var N=function(){var e=Object(d.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),(r=new FormData).set("file",s.file),r.set("id",s.id),e.next=6,p()({method:"post",url:"".concat("http://api-surat.pta-banjarmasin.go.id/public","/api/edit-file-sk-list"),data:r,headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(l.token)}}).then((function(e){a(),D()})).catch((function(e){S(e.response.data.error)}));case 6:u({file:"",id:t.id}),j(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.f,{color:"info",variant:"outline",shape:"square",size:"sm",onClick:D},"Ubah File SK"),r.a.createElement(c.gb,{size:"lg",show:w,onClose:D,closeOnBackdrop:!1,color:"info"},r.a.createElement(c.jb,{closeButton:!0},r.a.createElement(c.kb,null,"Ubah Nama Sk")),r.a.createElement(c.hb,null,r.a.createElement(c.u,{className:"mt-3",xs:"12",md:"12"},r.a.createElement(c.K,{row:!0},r.a.createElement(c.U,{invalid:y.file,custom:!0,id:"custom-file-input",onChange:function(e){return u(Object(k.a)(Object(k.a)({},s),{},{file:e.target.files[0]}))},onClick:function(e){e.target.value=null}}),r.a.createElement(c.cb,{htmlFor:"custom-file-input",variant:"custom-file"},s.file?s.file.name:"Upload Template"),y.file?y.file.map((function(e,t){return r.a.createElement(c.ab,{key:t},e)})):null))),r.a.createElement(c.ib,null,r.a.createElement(c.f,{color:"info",disabled:E,type:"submit",onClick:N},E?"...Loading":"Ubah")," ",r.a.createElement(c.f,{color:"secondary",onClick:D},"Cancel"))))}));t.default=Object(i.j)((function(e){var t=e.history,a=h(),i=a.Data,s=a.fields,u=a.Loading,m=a.GetData,d=a.User,f=a.details,b=a.toggleDetails,p=Object(n.useCallback)(m,[]);return Object(n.useEffect)((function(){p()}),[p]),r.a.createElement(c.j,null,r.a.createElement(c.n,null,r.a.createElement("div",{className:"card-header-actions font-weight-bold"},r.a.createElement(y,{history:t}))),r.a.createElement(c.k,null,r.a.createElement(c.y,{items:i,fields:s,columnFilter:!0,noItemsView:u?{noItems:"... Mengambil Data"}:{noResults:"Pencarian Tidak Ditemukan",noItems:"Tidak Ada Data"},loading:u,itemsPerPage:10,hover:!0,striped:!0,sorter:!0,pagination:!0,scopedSlots:{milik:function(e,t){return r.a.createElement("td",{className:"py-2 font_for_surat_masuk"},e.milik.nama)},created_at:function(e,t){return r.a.createElement("td",{className:"py-2 font_for_surat_masuk"},o(e.created_at).format("dddd, DD MMMM YYYY"))},show_details:function(e,t){return r.a.createElement("td",{className:"py-2"},r.a.createElement(c.f,{as:l.b,to:"/buat-dokument/sk/".concat(e.slug,"/").concat(e.id,"/").concat(e.instansi_id),color:"primary",variant:"outline",shape:"square",size:"sm"},"Buat"),e.instansi_id===d.instansi_id?r.a.createElement(c.f,{color:"warning",variant:"outline",shape:"square",size:"sm",className:"ml-2",onClick:function(){b(t)}},"Edit"):r.a.createElement("a",{href:"".concat("http://api-surat.pta-banjarmasin.go.id/public","/template_sk/").concat(e.filenya)},"Download"))},details:function(e,t){return r.a.createElement(c.v,{show:f.includes(t)},r.a.createElement(c.k,null,r.a.createElement("table",{cellPadding:0,cellSpacing:0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("a",{href:"".concat("http://api-surat.pta-banjarmasin.go.id/public","/template_sk/").concat(e.filenya)},"Download File"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("td",null,r.a.createElement(S,{item:e,GetDataUser:p})),r.a.createElement("td",null,r.a.createElement(v,{item:e,GetDataUser:p})))))))}}})))}))}}]);
//# sourceMappingURL=24.6431e7cb.chunk.js.map