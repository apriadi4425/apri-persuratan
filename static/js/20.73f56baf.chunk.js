(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[20],{658:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(671);var r=t(670);function o(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},799:function(e,a,t){},861:function(e,a,t){"use strict";t.r(a);var n=t(157),r=t(105),o=t(618),l=t(1),c=t.n(l),s=t(616),i=t(658),u=t(622),d=t.n(u),m=t(623),p=t(620),b=t.n(p),g=function(e,a,t,n,r){var o=JSON.parse(localStorage.getItem("user")),l=function(){var t=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.next=3,b.a.get("".concat("https://surat3.pa-kotabaru.go.id/public","/api/user"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(o.token)}}).then((function(a){e(a.data)})).catch((function(e){console.log(e)}));case 3:a(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{GetData:l,toggleDetails:function(e){var a=t.indexOf(e),r=t.slice();-1!==a?r.splice(a,1):r=[].concat(Object(i.a)(t),[e]),n(r)},fields:[{key:"name",_style:{width:"25%"}},{key:"jabatan",_style:{width:"20%"}},{key:"email",_style:{width:"25%"}},{key:"telpon",_style:{width:"15%"}},{key:"aktif",_style:{width:"5%"}},{key:"show_details",label:"",_style:{width:"1%"},sorter:!1,filter:!1}],getBadge:function(e){switch(e){case 1:return"success";case 2:return"danger";default:return"primary"}},getAktif:function(e){switch(e){case 1:return"Aktif";case 2:default:return"Tidak Aktif"}},UbahKeaktifan:function(e,a){var t={aktif:a};b()({method:"put",url:"".concat("https://surat3.pa-kotabaru.go.id/public","/api/user-aktif/").concat(e),data:t,headers:{Accept:"application/json",Authorization:"Bearer ".concat(o.token)}}).then((function(e){l()})).catch((function(e){console.log("error")}))},GetUserById:function(){var e=Object(m.a)(d.a.mark((function e(a,t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat("https://surat3.pa-kotabaru.go.id/public","/api/user-edit/").concat(a),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(o.token)}}).then((function(e){console.log(e.data),r(e.data),t()})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),fields2:[{key:"name",_style:{width:"25%"}},{key:"jabatan",_style:{width:"20%"}},{key:"email",_style:{width:"25%"}},{key:"telpon",_style:{width:"15%"}},{key:"show_details",label:"Aksi",_style:{width:"1%"}}]}},f=t(648),h=t(649),E=(t(799),c.a.memo((function(e){var a=e.label,t=e.name,n=e.placeholder,r=e.value,o=e.onChange,l=e.invalid,i=e.classInput;return c.a.createElement(s.wb,null,c.a.createElement(s.u,{md:12},c.a.createElement(s.K,null,c.a.createElement(s.cb,{htmlFor:"inputIsInvalid"},a),c.a.createElement(s.S,{invalid:l,className:"hijau_sedang ".concat(i),value:r,onChange:o,id:t,name:t,placeholder:n}),l?l.map((function(e,a){return c.a.createElement(s.ab,{key:a},e)})):null)))}))),k=t(652),w=function(e){var a=Object(l.useState)({name:"",email:"",jabatan:"",telpon:"",password:"",c_password:""}),t=Object(o.a)(a,2),c=t[0],s=t[1],i=Object(l.useState)({}),u=Object(o.a)(i,2),p=u[0],g=u[1],f=Object(l.useState)(!1),h=Object(o.a)(f,2),E=h[0],w=h[1],j=Object(l.useState)(!1),v=Object(o.a)(j,2),O=v[0],y=v[1],C=function(){y(!O)};return{Form:c,Error:p,HandleForm:function(e){s(Object(r.a)(Object(r.a)({},c),{},Object(n.a)({},e.target.name,e.target.value)))},apiData:function(){var a=Object(m.a)(d.a.mark((function a(){var t;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=JSON.parse(localStorage.getItem("user")),w(!0),a.next=4,b()({method:"post",url:"".concat("https://surat3.pa-kotabaru.go.id/public","/api/register"),data:c,headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(a){var t={};return t["/notifikasi/".concat(a.data.success.instansi_id,"/").concat(a.data.success.id)]={disposisi:0},k.a.database().ref().update(t).then((function(a){C(),e(),s({name:"",email:"",jabatan:"",telpon:"",password:"",c_password:""})}))})).catch((function(e){e.response?400===e.response.status?g(e.response.data.error):console.log(e.response.status):e.request?console.log(e.request):console.log("Error",e.message)}));case 4:w(!1);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),modal:O,TogleModal:C,ButtonForm:E}},j=c.a.memo((function(e){var a=e.GetDataUser,t=w(a),n=t.Form,r=t.Error,o=t.HandleForm,l=t.apiData,i=t.modal,u=t.TogleModal,d=t.ButtonForm;return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.f,{onClick:u,size:"sm",className:"btn-brand mr-2 mb-1"}," ",c.a.createElement(f.a,{icon:h.f})),c.a.createElement(s.gb,{show:i,onClose:u,closeOnBackdrop:!1,color:"success"},c.a.createElement(s.jb,{closeButton:!0},c.a.createElement(s.kb,null,"Tambah Data User")),c.a.createElement(s.hb,null,c.a.createElement(E,{invalid:r.name,value:n.name,onChange:o,label:"Nama Pengguna",name:"name",placeholder:"Nama Pengguna"}),c.a.createElement(E,{invalid:r.email,value:n.email,onChange:o,label:"Email Pengguna",name:"email",placeholder:"Email Pengguna"}),c.a.createElement(E,{invalid:r.jabatan,value:n.jabatan,onChange:o,label:"Jabatan Pengguna",name:"jabatan",placeholder:"Jabatan Pengguna"}),c.a.createElement(E,{invalid:r.telpon,value:n.telpon,onChange:o,label:"Telpon Pengguna",name:"telpon",placeholder:"Telpon Pengguna"}),c.a.createElement(E,{classInput:"mirip-password",value:n.password,onChange:o,invalid:r.password,label:"Password Pengguna",name:"password",placeholder:"Password Pengguna"}),c.a.createElement(E,{classInput:"mirip-password",value:n.c_password,onChange:o,invalid:r.c_password,label:"Konfirmasi Password",name:"c_password",placeholder:"Konfirmasi Password"})),c.a.createElement(s.ib,null,c.a.createElement(s.f,{color:"success",disabled:d,onClick:l},d?"... Loading":"Tambah Data"),c.a.createElement(s.f,{color:"secondary",onClick:u},"Cancel"))))})),v=t(378),O=c.a.memo((function(e){var a=e.label,t=e.name,n=e.placeholder,r=e.value,o=e.onChange,l=e.classInput,i=e.invalid,u=e.warna;return c.a.createElement(s.wb,null,c.a.createElement(s.u,{md:12},c.a.createElement(s.K,null,c.a.createElement(s.cb,{htmlFor:"inputIsInvalid"},a),c.a.createElement(s.S,{invalid:i,className:"".concat(u," ").concat(l),value:r,onChange:o,id:"".concat(t,"_edit"),name:t,placeholder:n}),i?i.map((function(e,a){return c.a.createElement(s.ab,{key:a},e)})):null)))})),y=c.a.memo((function(e){var a=e.FormEdit,t=e.modalEdit,n=e.TogleModalEdit,r=e.HandleFormEdit,i=e.ErrorFormEdit,u=e.SetErrorFormEdit,p=e.GetDataUser,g=Object(l.useState)(!1),f=Object(o.a)(g,2),h=f[0],E=f[1],k=function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("user")),E(!0),e.next=4,b()({method:"put",url:"".concat("https://surat3.pa-kotabaru.go.id/public","/api/user/").concat(a.id),data:a,headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(e){p(),n()})).catch((function(e){e.response?400===e.response.status?u(e.response.data.message):console.log(e.response.status):e.request?console.log(e.request):console.log("Error",e.message)}));case 4:E(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(s.gb,{show:t,onClose:n,closeOnBackdrop:!1,color:"info"},c.a.createElement(s.jb,{closeButton:!0},c.a.createElement(s.kb,null,"Edit Data User #",a.name,"#")),c.a.createElement(s.hb,null,c.a.createElement(O,{warna:"biru_sedang",invalid:i.name,value:a.name,onChange:r,label:"Nama Pengguna",name:"name",placeholder:"Nama Pengguna"}),c.a.createElement(O,{warna:"biru_sedang",invalid:i.email,value:a.email,onChange:r,label:"Email Pengguna",name:"email",placeholder:"Email Pengguna"}),c.a.createElement(O,{warna:"biru_sedang",invalid:i.jabatan,value:a.jabatan,onChange:r,label:"Jabatan Pengguna",name:"jabatan",placeholder:"Jabatan Pengguna"}),c.a.createElement(O,{warna:"biru_sedang",invalid:i.telpon,value:a.telpon,onChange:r,label:"Telpon Pengguna",name:"telpon",placeholder:"Telpon Pengguna"})),c.a.createElement(s.ib,null,c.a.createElement(s.f,{disabled:h,onClick:k,color:"info"},h?"...Loading":"Simpan Data"),c.a.createElement(s.f,{color:"secondary",onClick:n},"Cancel")))})),C=c.a.memo((function(e){var a=e.modalPassword,t=e.TogleModalPassword,n=e.FormEdit,i=Object(l.useState)({password:"",c_password:""}),u=Object(o.a)(i,2),p=u[0],g=u[1],f=Object(l.useState)([]),h=Object(o.a)(f,2),E=h[0],k=h[1],w=Object(l.useState)(!1),j=Object(o.a)(w,2),v=j[0],y=j[1],C=function(){var e=Object(m.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),y(!0),e.next=4,b()({method:"put",url:"".concat("https://surat3.pa-kotabaru.go.id/public","/api/user-password/").concat(n.id),data:p,headers:{Accept:"application/json",Authorization:"Bearer ".concat(a.token)}}).then((function(e){t()})).catch((function(e){e.response?400===e.response.status?k(e.response.data.message):console.log(e.response.status):e.request?console.log(e.request):console.log("Error",e.message)}));case 4:y(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.gb,{show:a,onClose:t,closeOnBackdrop:!1,color:"warning"},c.a.createElement(s.jb,{closeButton:!0},c.a.createElement(s.kb,null,"Ubah Password")),c.a.createElement(s.hb,null,c.a.createElement(O,{warna:"kuning_sedang",invalid:E.password,value:p.password,onChange:function(e){return g(Object(r.a)(Object(r.a)({},p),{},{password:e.target.value}))},classInput:"mirip-password",label:"Password Baru",name:"password",placeholder:"Masukan Passworrd Baru"}),c.a.createElement(O,{warna:"kuning_sedang",invalid:E.c_password,value:p.c_password,onChange:function(e){return g(Object(r.a)(Object(r.a)({},p),{},{c_password:e.target.value}))},classInput:"mirip-password",label:"Konfirmasi Password Baru",name:"c_password",placeholder:"Masukan Konfirmasi Passworrd Baru"})),c.a.createElement(s.ib,null,c.a.createElement(s.f,{disabled:v,onClick:C,color:"warning"},v?"...Loading":"Ubah Data"),c.a.createElement(s.f,{color:"secondary",onClick:t},"Cancel"))))}));a.default=function(){var e=JSON.parse(localStorage.getItem("user")),a=Object(l.useState)([]),t=Object(o.a)(a,2),i=t[0],u=t[1],d=Object(l.useState)(!1),m=Object(o.a)(d,2),p=m[0],b=m[1],f=Object(l.useState)({name:"",email:"",jabatan:"",telpon:""}),h=Object(o.a)(f,2),E=h[0],k=h[1],w=Object(l.useState)([]),O=Object(o.a)(w,2),P=O[0],S=O[1],_=Object(l.useCallback)((function(e){k(Object(r.a)(Object(r.a)({},E),{},Object(n.a)({},e.target.name,e.target.value)))}),[E]),A=Object(l.useState)(!1),B=Object(o.a)(A,2),I=B[0],F=B[1],D=Object(l.useState)(!1),N=Object(o.a)(D,2),T=N[0],U=N[1],M=Object(l.useCallback)((function(){F(!I)}),[I]),x=Object(l.useCallback)((function(){U(!T)}),[T]),z=Object(l.useState)([]),J=Object(o.a)(z,2),K=J[0],G=J[1],q=g(u,b,K,G,k),H=q.GetData,Y=q.toggleDetails,L=q.fields,R=q.getBadge,V=q.getAktif,Q=q.UbahKeaktifan,W=q.GetUserById,X=q.fields2,Z=Object(l.useCallback)(H,[]);return Object(l.useEffect)((function(){Z()}),[Z]),c.a.createElement(s.j,null,c.a.createElement(s.n,null,"Konfigurasi User Pengguna"," ",c.a.createElement("div",{className:"card-header-actions"},1===e.level?c.a.createElement(j,{GetDataUser:Z}):null,c.a.createElement(y,{GetDataUser:Z,SetErrorFormEdit:S,ErrorFormEdit:P,FormEdit:E,modalEdit:I,TogleModalEdit:M,HandleFormEdit:_}),c.a.createElement(C,{modalPassword:T,TogleModalPassword:x,FormEdit:E}))),c.a.createElement(s.k,null,c.a.createElement(s.y,{items:i,fields:1===e.level?L:X,columnFilter:1===e.level,noItemsView:p?{noItems:"... Mengambil Data"}:{noResults:"Pencarian Tidak Ditemukan",noItems:"Tidak Ada Data"},loading:p,itemsPerPage:10,hover:!0,striped:!0,sorter:1===e.level,pagination:1===e.level,scopedSlots:{aktif:function(e){return c.a.createElement("td",null,c.a.createElement(s.b,{color:R(e.aktif)},V(e.aktif)))},show_details:function(e,a){return c.a.createElement("td",{className:"py-2"},c.a.createElement(s.f,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){Y(a)}},K.includes(a)?"Sembunyikan":"Tampilkan"))},details:function(a,t){return c.a.createElement(s.v,{show:K.includes(t)},c.a.createElement(s.k,null,c.a.createElement("h4",null,a.name),c.a.createElement("p",{className:"text-muted"},"dibuat sejak: ",v(a.tanggal_buat).locale("id").format("dddd, DD MMMM YYYY")),c.a.createElement(s.f,{onClick:function(){return W(a.id,M)},size:"sm",color:"info"},"User Settings"),c.a.createElement(s.f,{className:"ml-1",onClick:function(){return W(a.id,x)},size:"sm",color:"warning"},"Ubah Password"),1===e.level&&2===a.level?c.a.createElement(s.f,{onClick:function(){Q(a.id,a.aktif)},size:"sm",color:1===a.aktif?"danger":"success",className:"ml-1"},1===a.aktif?"Non Aktifkan":"Aktifkan"):null))}}})))}}}]);
//# sourceMappingURL=20.73f56baf.chunk.js.map